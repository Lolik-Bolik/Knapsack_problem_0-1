# Lab №2. Knapsack Problem


## Results for *[Knapsack 0-1 Data](https://people.sc.fsu.edu/~jburkardt/datasets/knapsack_01/knapsack_01.html)*
**Замечание:** Столбец `Optim value` содержит правильное значение ценности для рюкзака. Время указано в секундах.

Для того, чтобы не захламлять таблицу мы приняли решение не включать правильный набор предметов в таблицу,
только тот, который берем мы сами. По столбцу `Match` можно узнать, совпал ли этот набор с оптимальным
Поскольку в каждой группе есть алгоритм, выдающий правильный набор, то по нему можно определить, где какой алгоритм ошибся.
В основном, ошибается жадный алгоритм из-за своей изначальной неоптимальности.
Кроме того, в связи с недетерминированностью генетического алгоритма, он может ошибаться на некоторых сэмплах, что и видно из таблицы
### knapsack_1

|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|DynamicSolver   |0.0006                |309          |309        |165          |165     |[1 1 1 1 0 1 0 0 0 0]          |True |
|GeneticSolver   |0.0578                |309          |309        |165          |165     |[1 1 1 1 0 1 0 0 0 0]          |True |
|ExhaustiveSearch|0.0009944438934326172 |309          |309        |165          |165     |[1 1 1 1 0 1 0 0 0 0]          |True |
|GreedySearch    |1.2874603271484375e-05|309          |309        |165          |165     |[1 1 1 1 0 1 0 0 0 0]          |True |
|BranchBound     |0.020967960357666016  |309          |309        |165          |165     |[1 1 1 1 0 1 0 0 0 0]|True |
### knapsack_2
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|BranchBound     |0.007566213607788086  |51           |51         |26           |26      |[0 1 1 1 0]               |True |
|ExhaustiveSearch|4.363059997558594e-05 |51           |51         |26           |26      |[0 1 1 1 0]                    |True |
|GreedySearch    |1.0013580322265623e-05|47           |51         |23           |26      |[1 0 1 0 0]                    |False|
|DynamicSolver   |0.0001                |51           |51         |26           |26      |[0 1 1 1 0]                    |True |
|GeneticSolver   |0.0172                |51           |51         |26           |26      |[0 1 1 1 0]                    |True |
### knapsack_3
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|DynamicSolver   |0.0003                |150          |150        |190          |190     |[1 1 0 0 1 0]                  |True |
|GeneticSolver   |0.0171                |119          |150        |172          |190     |[0 0 1 0 1 1]                  |False|
|ExhaustiveSearch|6.389617919921875e-05 |150          |150        |190          |190     |[1 1 0 0 1 0]                  |True |
|GreedySearch    |9.775161743164062e-06 |146          |150        |179          |190     |[1 1 0 1 0 0]                  |False|
|BranchBound     |0.006632089614868164  |150          |150        |190          |190     |[1 1 0 0 1 0]            |True |

### knapsack_4
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|BranchBound     |0.005627155303955078  |107          |107        |50           |50      |[1 0 0 1 0 0 0]         |True |
|GreedySearch    |1.049041748046875e-05 |102          |107        |48           |50      |[1 1 0 0 1 1 0]                |False|
|ExhaustiveSearch|0.00012111663818359375|107          |107        |50           |50      |[1 0 0 1 0 0 0]                |True |
|GeneticSolver   |0.0238                |105          |107        |50           |50      |[1 1 0 0 0 1 1]                |False|
|DynamicSolver   |0.0001                |107          |107        |50           |50      |[1 0 0 1 0 0 0]                |True |
### knapsack_5
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|DynamicSolver   |0.0002                |900          |900        |104          |104     |[1 0 1 1 1 0 1 1]              |True |
|GeneticSolver   |0.0345                |900          |900        |104          |104     |[1 0 1 1 1 0 1 1]              |True |
|ExhaustiveSearch|0.0003082752227783203 |900          |900        |104          |104     |[1 0 1 1 1 0 1 1]              |True |
|GreedySearch    |1.4543533325195312e-05|858          |900        |97           |104     |[1 1 0 1 1 1 1 1]              |False|
|BranchBound     |0.008033990859985352  |900          |900        |104          |104     |[1 0 1 1 1 0 1 1]      |True |

### knapsack_6
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|BranchBound     |0.03552460670471192   |1735         |1735       |169          |170     |[0 1 0 1 0 0 1]         |True |
|GreedySearch    |1.3113021850585938e-05|1478         |1735       |140          |170     |[1 1 1 0 0 0 0]                |False|
|GeneticSolver   |0.0257                |1706         |1735       |167          |170     |[0 1 0 0 0 1 1]                |False|
|DynamicSolver   |0.0003                |1735         |1735       |169          |170     |[0 1 0 1 0 0 1]                |True |
|ExhaustiveSearch|0.00012302398681640625|1735         |1735       |169          |170     |[0 1 0 1 0 0 1]                |True |
### knapsack_7
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|GreedySearch    |1.883506774902344e-05 |1441         |1458       |740          |750     |[1 1 1 0 0 0 1 1 1 0 0 0 0 1 1]|False|
|DynamicSolver   |0.0034                |1458         |1458       |749          |750     |[1 0 1 0 1 0 1 1 1 0 0 0 0 1 1]|True |
|GeneticSolver   |0.1671                |1449         |1458       |750          |750     |[1 1 1 0 0 1 1 0 0 0 0 0 1 1 1]|False|
|ExhaustiveSearch|0.060419797897338874  |1458         |1458       |749          |750     |[1 0 1 0 1 0 1 1 1 0 0 0 0 1 1]|True |
|BranchBound     |0.10661792755126953   |1458         |1458       |749          |750     |[1 0 1 0 1 0 1 1 1 0 0 0 0 1 1]|True |

В следующей таблице можно увидеть сравнение алгоритмов `BranchAndBound` и `ExhaustiveSearch`, поскольку оба эти алгоритма пробегают по дереву перебора.
Из этой таблицы можно увидеть, сколько узлов пробегает каждый алгоритм, а также можно увидеть основные time-killers первого алгоритма
В связи с тем, что выбранный солвер работает зачастую довольно медленно, в худшем случае `BranchAndBound` проигрывает `ExhaustiveSearch`, что можно увидеть на наборе данных, который будет представлен следующим
### BnB - Naive
|File name       |Method name           |Work time|Match|Counter|Solve Time|Get Float Time                 |
|----------------|----------------------|---------|-----|-------|----------|-------------------------------|
|knapsack_1      |ExhaustiveSearch      |0.0009944438934326172|True |1024   |NaN       |NaN                            |
|knapsack_1      |BranchBound           |0.020967960357666016|True |2      |0.0011560916900634766|NaN                            |
|knapsack_2      |BranchBound           |0.007566213607788086|True |24     |0.004033565521240234|6.651878356933594e-05          |
|knapsack_2      |ExhaustiveSearch      |4.363059997558594e-05|True |32     |NaN       |NaN                            |
|knapsack_3      |ExhaustiveSearch      |6.389617919921875e-05|True |64     |NaN       |NaN                            |
|knapsack_3      |BranchBound           |0.006632089614868164|True |22     |0.003481864929199219|6.0558319091796875e-05         |
|knapsack_4      |BranchBound           |0.005627155303955078|True |14     |0.002467632293701172|3.62396240234375e-05           |
|knapsack_4      |ExhaustiveSearch      |0.00012111663818359375|True |128    |NaN       |NaN                            |
|knapsack_5      |ExhaustiveSearch      |0.0003082752227783203|True |256    |NaN       |NaN                            |
|knapsack_5      |BranchBound           |0.008033990859985352|True |22     |0.004161357879638672|6.961822509765625e-05          |
|knapsack_6      |BranchBound           |0.03552460670471192|True |126    |0.02119922637939453|0.00042510032653808594         |
|knapsack_6      |ExhaustiveSearch      |0.00012302398681640625|True |128    |NaN       |NaN                            |
|knapsack_7      |ExhaustiveSearch      |0.060419797897338874|True |32768  |NaN       |NaN                            |
|knapsack_7      |BranchBound           |0.10661792755126953|True |378    |0.06291556358337402|0.001249074935913086           |

## Results for *[Low-dimensional 0/1 knapsack problems](http://artemisa.unicauca.edu.co/~johnyortega/instances_01_KP/)*
**Замечание:** Файл `f5_l-d_kp_15_375` был удален, т.к в нем присутствуют дробные значения
### f1_l-d_kp_10_269
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|ExhaustiveSearch|0.0013439655303955078 |295          |295        |269          |269     |[0 1 1 1 0 0 0 1 1 1]          |True |
|GeneticSolver   |0.0561                |295          |295        |269          |269     |[0 1 1 1 0 0 0 1 1 1]          |True |
|DynamicSolver   |0.0007                |295          |295        |269          |269     |[0 1 1 1 0 0 0 1 1 1]          |True |
|GreedySearch    |1.4543533325195312e-05|294          |295        |260          |269     |[0 1 1 0 1 0 0 1 1 1]          |False|
|BranchBound     |0.0075778961181640625 |295          |295        |269          |269     |[0 1 1 1 0 0 0 1 1 1]|True |

### f2_l-d_kp_20_878
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|ExhaustiveSearch|1.4278116226196291    |1024         |1024       |871          |878     |[1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 0 1 0 1 1]|True |
|GeneticSolver   |0.3826                |1024         |1024       |871          |878     |[1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 0 1 0 1 1]|True |
|DynamicSolver   |0.0057                |1024         |1024       |871          |878     |[1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 0 1 0 1 1]|True |
|GreedySearch    |2.551078796386719e-05 |1018         |1024       |837          |878     |[1 1 1 1 1 1 1 0 1 1 1 1 1 0 1 0 1 1 1 1]|False|
|BranchBound     |0.006833314895629883  |1024         |1024       |871          |878     |[1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 0 1 0 1 1]|True |

### f3_l-d_kp_4_20

|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|GreedySearch    |9.059906005859377e-06 |35           |35         |18           |20      |[1 1 0 1]                      |True |
|BranchBound     |0.0025620460510253906 |35           |35         |18           |20      |[1 1 0 1]                  |True |
|ExhaustiveSearch|1.9788742065429688e-05|35           |35         |18           |20      |[1 1 0 1]                      |True |
|GeneticSolver   |0.0073                |35           |35         |18           |20      |[1 1 0 1]                      |True |
|DynamicSolver   |0.0                   |35           |35         |18           |20      |[1 1 0 1]                      |True |

### f4_l-d_kp_4_11
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|DynamicSolver   |0.0                   |23           |23         |11           |11      |[0 1 0 1]                      |True |
|BranchBound     |0.028420448303222656  |23           |23         |11           |11      |[0 1 0 1]                  |True |
|GreedySearch    |1.5735626220703125e-05|16           |23         |6            |11      |[1 1 0 0]                      |False|
|ExhaustiveSearch|2.193450927734375e-05 |23           |23         |11           |11      |[0 1 0 1]                      |True |
|GeneticSolver   |0.0087                |23           |23         |11           |11      |[0 1 0 1]                      |True |

### f6_l-d_kp_10_60
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|BranchBound     |0.008014678955078125  |52           |52         |57           |60      |[0 0 1 0 1 1 1 1 1 1]|True |
|GreedySearch    |1.4066696166992188e-05|52           |52         |57           |60      |[0 0 1 0 1 1 1 1 1 1]          |True |
|ExhaustiveSearch|0.0009887218475341797 |52           |52         |57           |60      |[0 0 1 0 1 1 1 1 1 1]          |True |
|GeneticSolver   |0.053                 |52           |52         |59           |60      |[0 0 1 1 1 0 0 1 1 1]          |True |
|DynamicSolver   |0.0002                |52           |52         |60           |60      |[0 0 1 1 1 0 1 0 0 0]          |True |

### f7_l-d_kp_7_50
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|ExhaustiveSearch|0.0001506805419921875 |107          |107        |50           |50      |[1 0 0 1 0 0 0]                |True |
|BranchBound     |0.006130218505859375  |107          |107        |50           |50      |[1 0 0 1 0 0 0]         |True |
|GreedySearch    |1.3828277587890625e-05|102          |107        |48           |50      |[1 1 0 0 1 1 0]                |False|
|GeneticSolver   |0.0241                |107          |107        |50           |50      |[1 0 0 1 0 0 0]                |True |
|DynamicSolver   |0.0001                |107          |107        |50           |50      |[1 0 0 1 0 0 0]                |True |

### f8_l-d_kp_23_10000
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|GreedySearch    |2.5272369384765625e-05|9751         |9767       |9750         |10000   |[1 1 1 1 1 1 1 0 0 1 0 0 0 0 0 1 1 0 0 0 0 1 0]|False|
|ExhaustiveSearch|11.809564352035522    |9767         |9767       |9768         |10000   |[1 1 1 1 1 1 1 1 0 0 1 0 0 0 0 1 1 0 0 0 0 0 0]|True |
|GeneticSolver   |0.5925                |9760         |9767       |9761         |10000   |[1 1 1 1 1 0 1 1 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0]|False|
|DynamicSolver   |0.0703                |9767         |9767       |9768         |10000   |[1 1 1 1 1 1 1 1 0 1 0 0 0 0 0 1 1 0 0 0 0 0 0]|True |
|BranchBound     |977.473798751831     |9767         |9767       |9768         |10000   |[1 1 1 1 1 1 1 1 0 1 0 0 0 0 0 1 1 0 0 0 0 0 0]|True |

### f9_l-d_kp_5_80
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|GreedySearch    |1.931190490722656e-05 |130          |130        |60           |80      |[1 1 1 1 0]                    |True |
|DynamicSolver   |0.0001                |130          |130        |60           |80      |[1 1 1 1 0]                    |True |
|GeneticSolver   |0.0109                |130          |130        |60           |80      |[1 1 1 1 0]                    |True |
|ExhaustiveSearch|3.4809112548828125e-05|130          |130        |60           |80      |[1 1 1 1 0]                    |True |
|BranchBound     |0.0016820430755615234 |130          |130        |60           |80      |[1 1 1 1 0]               |True |

### f10_l-d_kp_20_879.csv
|Method name     |Work time             |Result Profit|Optim value|Result Weight|Capacity|Answer                         |Match|
|----------------|----------------------|-------------|-----------|-------------|--------|-------------------------------|-----|
|BranchBound     |0.007773399353027344  |1025         |1025       |871          |879     |[1 1 1 1 1 1 1 1 1 0 1 1 1 1 0 1 0 1 1 1]|True |
|GreedySearch    |2.47955322265625e-05  |1019         |1025       |837          |879     |[1 1 1 1 1 1 0 1 1 0 1 1 1 1 1 1 0 1 1 1]|False|
|ExhaustiveSearch|1.4080164432525637    |1025         |1025       |871          |879     |[1 1 1 1 1 1 1 1 1 0 1 1 1 1 0 1 0 1 1 1]|True |
|GeneticSolver   |0.3839                |1025         |1025       |871          |879     |[1 1 1 1 1 1 1 1 1 0 1 1 1 1 0 1 0 1 1 1]|True |
|DynamicSolver   |0.0053                |1025         |1025       |871          |879     |[1 1 1 1 1 1 1 1 1 0 1 1 1 1 0 1 0 1 1 1]|True |

### BnB - Naive
В данной таблице можно увидеть, что в худшем случае при использовании данного солвера `BnB` может сильно проиграть `Naive Search`.
Данный случай выделен жирным

|File name       |Method name           |Work time|Match|Counter|Solve Time|Get Float Time                 |
|----------------|----------------------|---------|-----|-------|----------|-------------------------------|
|f10_l-d_kp_20_879|BranchBound           |0.007773399353027344|True |22     |0.004014015197753906|6.365776062011719e-05          |
|f10_l-d_kp_20_879|ExhaustiveSearch      |1.4080164432525637|True |1048576|NaN       |NaN                            |
|f1_l-d_kp_10_269|ExhaustiveSearch      |0.0013439655303955078|True |1024   |NaN       |NaN                            |
|f1_l-d_kp_10_269|BranchBound           |0.0075778961181640625|True |24     |0.004029512405395508|7.319450378417969e-05          |
|f2_l-d_kp_20_878|ExhaustiveSearch      |1.4278116226196291|True |1048576|NaN       |NaN                            |
|f2_l-d_kp_20_878|BranchBound           |0.006833314895629883|True |20     |0.0034322738647460933|5.5789947509765625e-05         |
|f3_l-d_kp_4_20  |BranchBound           |0.0025620460510253906|True |6      |0.0010960102081298828|1.1920928955078125e-05         |
|f3_l-d_kp_4_20  |ExhaustiveSearch      |1.9788742065429688e-05|True |16     |NaN       |NaN                            |
|f4_l-d_kp_4_11  |BranchBound           |0.028420448303222656|True |14     |0.0036096572875976562|4.625320434570313e-05          |
|f4_l-d_kp_4_11  |ExhaustiveSearch      |2.193450927734375e-05|True |16     |NaN       |NaN                            |
|f6_l-d_kp_10_60 |BranchBound           |0.008014678955078125|True |26     |0.00437617301940918|7.43865966796875e-05           |
|f6_l-d_kp_10_60 |ExhaustiveSearch      |0.0009887218475341797|True |1024   |NaN       |NaN                            |
|f7_l-d_kp_7_50  |ExhaustiveSearch      |0.0001506805419921875|True |128    |NaN       |NaN                            |
|f7_l-d_kp_7_50  |BranchBound           |0.006130218505859375|True |14     |0.002872467041015625|4.38690185546875e-05           |
|**f8_l-d_kp_23_10000**|ExhaustiveSearch      |**11.809564352035522**|True |8388608|NaN       |NaN                            |
|**f8_l-d_kp_23_10000**|BranchBound           |**977.473798751831**|True |4407676|702.7050042152405|13.483039855957033             |
|f9_l-d_kp_5_80  |ExhaustiveSearch      |3.4809112548828125e-05|True |32     |NaN       |NaN                            |
|f9_l-d_kp_5_80  |BranchBound           |0.0016820430755615234|True |2      |0.0005018711090087892|NaN                            |

## Results for *[Large-scale 0/1 knapsack problems](http://artemisa.unicauca.edu.co/~johnyortega/instances_01_KP/)*
**Замечание:** `ExhaustiveSearch` не использовался, поскольку ждать пару миллионов лет немного непозволительная роскошь.
Кроме того, начиная с некоторого набора данных возникли проблемы с солвером `BnB`, который требует его купить (^_^) для решения настолько больших систем.
Поэтому было принято решения использовать бенчмарк не полностью
Результаты сгрупированны по числу предметов, доступных для выбора
Кроме того, данная статистика не содержит поле `Answer`, т.к оно слишком большое и захламляет таблицу
### 100 Items

### 200 Items

### 500 Items

### 1000 Items

### 2000 Items

### 5000 Items

### 10000 Items


### BnB Timekillers

## Team Members
- *[Alexander Slavutin](https://github.com/AlexanderSlav)* 
- *[Pavel Semkin](https://github.com/PVSemk)*

Copyright (C) 2020-2021, Bolik&Lolik Inc. , all rights reserved.
